<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>1
</title>
   <script type="text/javascript" src="jquery.js"></script>
   <style>
    *
    {
      margin:0;
      padding:0;
    }
    html,body
    {
	  width:100%;
      height:100%;
	  background: #ffeaea;
    }
    #html
   {
	 position:relative;
	 width:1300px;
	 height:620px;
	 overflow:hidden;
	 margin:0 auto;
     background: #ffeaea;
   }
    #main
	{ 
	  position:absolute;
	  top:0;
	  left:0;
      width:1300px;
      height:620px;
	  background-image:url("back/back1.jpg");
	  background-size:100%;
	  line-height:0px;
	  z-index:998;
    }
	    #gift
		{ position:absolute;
		  width:70px;
		  height:70px;
		  top:200px;
		  left:610px;
		  background-image:url(back/gift.gif);
		  background-size:100%;
		}
    #second
	{ 
	  position:absolute;
	  top:0;
	  left:0;
	  width:1300px;
      height:620px;
	  background: #ffeaea;
      background-image:url("back/back2.jpg");
	  background-size:1300px 100%;
	  line-height:0px;
	  z-index:0;
	}
        #cake
		{ position:absolute;
		  width:200px;
		  height:200px;
          top:140px;
		  left:550px;
		}
             #cake2
            {   width:50px;
                height:50px;
                margin:0 auto;
                background-image:url("back/cake.gif");
                background-size:50px 50px;
            }
      
    #letter1
    {
            position:absolute;
            top:-180px;
			left:540px;
            width:220px;
            height:80px;
            transition:0.4s;
			background-image:url(back/letter1.gif);
			background-size:220px 80px;
            z-index:997;
    }
	#letter2
    {
            position:absolute;
            top:-80px;
			left:540px;
            width:220px;
            height:80px;
            transition:0.5s;
			background-image:url(back/letter2.gif);
            background-size:220px 80px;
            z-index:997;
    }
	#ch_word
	{ 
	    position:absolute;
		display:none;
        top:270px;
		left:540px;
        width:220px;
        height:100px;
        transition:0.4s;
		background-image:url(back/happy.gif);
		background-size:220px 100px;
        z-index:997;
	}
		#canvas1
        {
            position: absolute;
	        display:none;
            top:0px;
            left:0px;
            width:1300px;
            height: 120px;
            opacity: 0.8;
            z-index:997;
        }
	    #canvas2
		{
		    position:absolute;
			display:none;
            top:250px;
			left:540px;
            width:220px;
            height:1000px;
			z-index:997;
		}
       
/*----------------------------加载---------------------------------------------*/
    #loading
    {
     position: absolute;
     top:0;
     left:0;
     width:100%;
     height:620px;
     border:2px solid grey;
     background: #ffedff;
     background-image:url("back/load.jpg");
     z-index:999;
    }
        progress{
            position:absolute;
            top:0;
            left:0;
            bottom:0;
            right: 0;
            width:400px;
            margin: auto;
           }
        #loadNum{
            position:absolute;
            top:55%;
            left:0;
            bottom:0;
            right: 0;
            text-align: center;
            font-size: 30px;
            color:green;
        }
		#name
		{
		   color:pink;
		}
    </style>
</head>
<body>
<div id="html">  
   <!--            main            -->
   <div id="main">
      <div id="gift"></div>
   </div>
   <!--           second           -->
   <div id="second">
      <div id="cake">
          <div id="cake2"></div>
      </div>
   </div>
   <div id="letter1"></div>
   <div id="letter2"></div>
   <div id="ch_word"></div>
   <canvas id="canvas2" width="240" height="1000"></canvas>
   <canvas id="canvas1" width="1300" height="120"></canvas>
   
   <!--           loading          -->
   <div id="loading">
        <progress max="100" min="0" value="0"></progress>
        <p id="loadNum">0%</p>
   </div>
</div>
<script type="text/javascript">
 var count=0;
 var index=0;
 var imgSrc=["back/load.jpg","back/cake.gif","back/happy.gif","back/back1.jpg","back/gift.gif","back/back2.jpg","back/letter1.gif","back/letter2.gif","back/star.png"
 ];
$.each(imgSrc,function(i,src){
      var img=new Image();
        $(img).on("load",function(){
            $("progress").val((count+1)*imgSrc.length);
            $("#loadNum").html((count+1)*imgSrc.length+"%<br/>正在为<span id='name'>轻轻</span>拼命加载中，稍等哒...");
            count++;
            if(count>=imgSrc.length)
            {
                $("#loading").hide();
            }
        });
		$(img).on("error",function(){
		 alert("资源丢失，请联系管理员！");
		});
         img.src=src;
    });
$("#gift").click(function(){
     $("#second").hide();
      var num=0;
	  var opacity=1;
     var t=setInterval(function(){
	     opacity-=0.025;
	     $("#main").css("opacity",""+opacity+"");
		 if(opacity<=0)
		 {
		   clearInterval(t);
		   third();
		 }
	 },50);
   });
function third()
{
    $("#main").hide();
   setTimeout("four();",600);
}
function four()
{
     $('#second').fadeIn(3000);
     $('#canvas1').css('display','block');
     init();
     five();
}
 var n=50;
 var speed=0.1;
 var a=0.02;
 function five()
 {   speed+=a;
     n+=speed;
     $('#cake2').css({"width":""+n+"px","height":""+n+"px","background-size":""+n+"px "+n+"px"});
     if(n<=190) window.requestAnimationFrame(five);
     else  six();
 }
 
 function six()
 {   
     $("#letter1").css("top","260px");
     setTimeout(" seven()",500);
 }
 function seven()
 {
     $('#letter1').css('top','230px');
     setTimeout("$('#letter1').css('top','250px');eight()",300);
 }
 function eight()
 {
     $("#letter2").css("top","340px");
     setTimeout(" nine()",500);
 }
 function nine()
 {
    $('#letter2').css('top','310px');
     setTimeout("$('#letter2').css('top','330px');ten()",300);
 }
 function ten()
 {
     $("#canvas2").css("display","block");
	 setTimeout("$('#letter1').hide();$('#letter2').hide();letterDrop();",2000);
	 setTimeout("$('#ch_word').css('display','block');",2400);
 }
/*------------------------------------------------------------星星----------------------------------------------------------------------------------------*/
     var can;
     var ctx;
     var w;
     var h;
     var deltaTime;
     var lastTime;
     var starPic = new Image();
     var stars = [];
     var num = 180;
     var alive = 0;
     var switchy = true;
function init()
{
         can = document.getElementById("canvas1");
         ctx = can.getContext("2d");
         w = can.width;
         h = can.height;
         starPic.src = "back/star.png";
         for (var i = 0; i < num; i++) {
             stars[i] = new starObj();
             stars[i].init();
         }
         lastTime = Date.now();
         gameLoop();

}
function gameLoop() 
{
         window.requestAnimFrame(gameLoop);
         var now = Date.now();
         deltaTime = now - lastTime;
         lastTime = now;
         ctx.clearRect(0, 0, w, h);
         drawStars();
         aliveUpdate();
}
/*----------------------------------------星星对象-------------------------------------------*/
var starObj = function() {
	this.x;
	this.y;
    this.ySpd;
    this.picNo;
    this.timer;
    this.beta;
}
starObj.prototype.init = function() {
	this.x = Math.random() * 1300;
	this.y = Math.random() * 60;
    this.ySpd = Math.random() * 0.6 - 0.3; //[0,2) [-1, 1)
	this.xSpd = Math.random() * 0.2 - 0.1; //[0,2) [-1, 1)
    this.picNo = Math.floor(Math.random() * 7);
	this.timer = 0;
    this.beta = Math.random() * Math.PI * 0.5;
}
starObj.prototype.update = function() {
	this.xSpd = Math.random() * 0.2 - 0.1; //[0,2) [-1, 1)
	this.x += this.xSpd;
	this.y += this.ySpd;
   if (this.x > 1300 || this.x < -7)
	this.init();
   else if (this.y > 120|| this.y < - 7)
		this.init();
        this.timer += deltaTime;
	if (this.timer > 30) {
		this.picNo += 1;
		this.picNo %= 7;
		this.timer = 0;
	}
}
starObj.prototype.draw = function() {
	this.beta += deltaTime * 0.005;
	ctx.save();
	ctx.globalAlpha = 0.5+Math.sin(this.beta) * alive;
	ctx.drawImage(starPic, this.picNo * 7, 0, 7, 7, this.x, this.y, 11, 11);
	ctx.restore();
}
function drawStars() {
	for (var i = 0; i < num; i++) {
		stars[i].update();
		stars[i].draw();
	}
}
function aliveUpdate() {
	if (switchy) {
		alive += 0.03;
		if (alive > 0.7) {
			alive = 0.7;
		}
	} else {
		alive -= 0.03;
		if (alive < 0) {
			alive = 0;
		}
	}
}
window.requestAnimFrame = (function() 
{
return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||
function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element) 
{return window.setTimeout(callback,1000/60);};
})();
/*----------------------------------------------happy birthday-----------------------------------------------------------------------------------------------*/
var letterCan=
[
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0],
 [0,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,0,0,1,0,1,1,1,1,0,0,1,1,0,1,1,1,0,0,1,1,1,1,0,0],
 [0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,1,0,0,1,1,0,1,1,1,0,0,0],
 [0,0,0,1,1,1,1,0,0,0,0,0,1,1,0,0,0,1,1,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,1,0,0,0],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,1,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,0,0],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,1,0,0,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0,0,0],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,1,0,0,1,1,1,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0,0,0,0],
 [0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
 [0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0],
 [1,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,0,0,0,0,0],
 [1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0],
 [1,1,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,1,1,1,1,1,0,0,1],
 [1,1,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,1,1,0,1,1],
 [1,1,1,1,1,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,0,0,1,0,0,0,1,1,0,0,1,1,1,0,1,0,1,1],
 [1,1,1,1,1,1,1,1,0,0,1,0,0,1,0,1,1,0,1,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,0,1,0,1,1,0,0,1,1,1],
 [0,1,0,0,0,0,0,1,1,0,1,0,0,1,1,0,0,0,1,0,0,0,1,0,0,1,1,0,1,1,1,1,0,0,0,1,1,0,1,0,0,1,1,1],
 [0,1,0,0,0,0,0,1,1,0,1,0,0,1,1,0,0,0,1,1,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],
 [0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0],
 [0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],
 [0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0],
 [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
];
  var can2 = document.getElementById("canvas2");
  var ctx2 = can2.getContext("2d");
  var color=["lightblue","orange","darkred","blue","darkgreen"];
  var isLetterOn=1;
  var Balls=[];
  addLetter();
function letterDrop()
{
  drawLetter();
  changeLetter();
  if(isLetterOn==1)
   {
    window.requestAnimationFrame(letterDrop);
   }
   else
   {
     $("#canvas2").hide();
   }
}
function addLetter()
{
   for(var i=0;i<32;i++)
    for(var j=0;j<44;j++)
	{  
	  if(letterCan[i][j]==1)
	   {
	   var aBall=
	      {
	      y:5*i,
	      x:10+5*j,
	      vx:0.7-Math.random()*1.4,
	      vy:-2,
	      g:0.2,
	      color:color[Math.floor(Math.random()*color.length)]
	      };
	      Balls.push(aBall);
	   }
    }
}
function drawLetter()
{   
     ctx2.clearRect(0,0,can2.width,can2.height);
   for(var i=0;i<Balls.length;i++)
    {  
	   ctx2.beginPath();
	   ctx2.fillStyle=Balls[i].color;
	   ctx2.arc(Balls[i].x,Balls[i].y,2.5,0,Math.PI*2,true);
	   ctx2.fill();
	}
}
function changeLetter()
{
    for(var i=0;i<Balls.length;i++)
	{
	  Balls[i].x+=Balls[i].vx;
	  Balls[i].y+=Balls[i].vy;
	  Balls[i].vy+=Balls[i].g;
	  if(Balls[i].y>1000)
	  {
	     isLetterOn=0;
	  }
	}
} 
</script>
</body>
</html>
<!--
称呼：轻轻
年龄19
2017-9-26
女
祝福语：今天是你的生日，我特此送来祝福，我知道会有很多人送给你祝福，我不是第一个，也不是最后一个，
但我相信，我会是那个最用心送祝福的人，我的祝福会是最真心的祝福，不管你信不信，反正我信！
不信你就闭上眼睛，许个愿吧，保准能实现！轻轻，生日快乐！
-->